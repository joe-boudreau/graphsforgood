import json
import boto3
import random
import string

dynamodb = boto3.resource('dynamodb')
dynamoTable = dynamodb.Table('Login_table')


def lambda_handler(event, context):
    try:

        dynamoTable.put_item(
            Item={
                'email': event['email_add'],
                'First Name': event['first_name'],
                'Last Name': event['last_name'],
                'password_hash': event['password_hash'],
                'salt': event['salt'],
            }

        )
        return {
            'statusCode': 200,
            'body': json.dumps("Created new table!")
        }
    except Exception as e:
        print("Failed to register user with email address provided: " + event['email_add'], e, "\n")
        return {
            'statusCode': 500,
            'body': json.dumps("Oops! Something went wrong.")
        }

